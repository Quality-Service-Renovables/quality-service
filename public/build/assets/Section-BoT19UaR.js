import{Q as R}from"./vue-quill.esm-bundler-2dK6wHVT.js";import{_ as H}from"./PrimaryButton-Gkck9oeO.js";import{L as I,H as P,q as T,r as l,o as a,e as r,a as z,b as t,w as e,F as w,y as k,c as m,d as c,t as _,g as i}from"./app-CdXlW3h5.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={components:{QuillEditor:R,PrimaryButton:H,Toaster:I},props:{dialogForm:{type:Boolean,required:!0},ct_inspection_uuid:{type:String,required:!0},inspection_uuid:{type:String,required:!0}},data(){return{dialogFormLoading:!1,sectionsForm:[],expandedPanel:[0,1,2,3,4,5,6]}},methods:{getForm(){this.dialogFormLoading=!0,P.get("api/inspection/forms/get-form-inspection/"+this.inspection_uuid).then(n=>{this.dialogFormLoading=!1,this.sectionsForm=n.data.data.sections}).catch(n=>{this.dialogFormLoading=!1,this.handleErrors(n)})},closeSectionDialog(){this.$emit("closeSectionDialog")},saveField(n){n.loading=!0;let d={inspection_uuid:this.inspection_uuid,form:[{inspection_form_value:n.content.inspection_form_value,inspection_form_comments:n.content.inspection_form_comments,ct_inspection_form_uuid:n.ct_inspection_form_uuid}]};if(console.log("formData: "),console.log(d),d.form[0].inspection_form_value==null||d.form[0].inspection_form_value==""){T.error("El campo no puede estar vacío"),n.loading=!1;return}else P.post("api/inspection/forms/set-form-inspection",d).then(f=>{n.loading=!1,T.success("Campo guardado correctamente"),f.data.data.length>0?n.content=f.data.data[0]:this.getForm()}).catch(f=>{n.loading=!1,this.handleErrors(f)})},complementData(n){n.content==null?(n.content={inspection_form_value:"",inspection_form_comments:""},n.switch_comment=!1):n.switch_comment=n.content.inspection_form_comments!==""&&n.content.inspection_form_comments!==null&&n.content.inspection_form_comments!=="<p><br></p>"},isEmptyField(n){return n.content.inspection_form_value==null||n.content.inspection_form_value==""}},mounted(){this.getForm()}},K={class:"max-w-7xl mx-auto sm:px-4 lg:px-6 mb-5 pb-5"},M={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={key:0},X={key:0,class:"mt-3 text-grey"},Y={key:1},Z={key:0},$={key:0,class:"mt-3 text-grey"};function S(n,d,f,ee,g,p){const v=l("v-card-subtitle"),U=l("v-expansion-panel-title"),y=l("v-icon"),q=l("v-card-title"),E=l("v-switch"),x=l("QuillEditor"),B=l("PrimaryButton"),F=l("v-card-text"),V=l("v-card"),D=l("v-expansion-panel-text"),L=l("v-expansion-panel"),b=l("v-expansion-panels"),j=l("v-col"),N=l("v-row"),Q=l("v-container");return a(),r("div",K,[z("div",M,[t(V,{loading:g.dialogFormLoading},{default:e(()=>[t(F,{class:"padding-0"},{default:e(()=>[t(Q,null,{default:e(()=>[t(N,null,{default:e(()=>[t(j,{cols:"12",class:"padding-0"},{default:e(()=>[t(b,{multiple:"",modelValue:g.expandedPanel,"onUpdate:modelValue":d[0]||(d[0]=u=>g.expandedPanel=u)},{default:e(()=>[(a(!0),r(w,null,k(g.sectionsForm,(u,G)=>(a(),m(L,{key:G,class:"my-5",expanded:!0},{default:e(()=>[t(U,{class:"text-h6"},{default:e(()=>[c(_(u.section_details.ct_inspection_section)+" ",1),t(v,{class:"ml-2 mt-0 pt-0"},{default:e(()=>[c(" Sección ")]),_:1})]),_:2},1024),t(D,null,{default:e(()=>[u.fields?(a(),r("div",W,[(a(!0),r(w,null,k(u.fields,(s,C)=>(a(),m(V,{key:C,class:"my-5",loading:s.loading},{default:e(()=>[c(_(p.complementData(s))+" ",1),t(q,{class:"d-flex justify-between"},{default:e(()=>[c(_(s.ct_inspection_form)+" ",1),s.content.inspection_form_value?(a(),m(y,{key:0,color:"success"},{default:e(()=>[c("mdi-check")]),_:1})):i("",!0),p.isEmptyField(s)&&s.required?(a(),m(y,{key:1,color:"red"},{default:e(()=>[c("mdi-alert-circle-outline")]),_:1})):i("",!0)]),_:2},1024),t(v,{class:"d-flex align-center justify-between"},{default:e(()=>[c(" Campo "+_(s.required?"*Requerido":"Opcional")+" ",1),t(E,{modelValue:s.switch_comment,"onUpdate:modelValue":o=>s.switch_comment=o,color:"secondary",label:"Comentario","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(F,{class:"pt-0"},{default:e(()=>[t(x,{content:s.content.inspection_form_value,"onUpdate:content":o=>s.content.inspection_form_value=o,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"]),s.switch_comment?(a(),r("p",X,"Comentarios:")):i("",!0),s.switch_comment?(a(),m(x,{key:1,content:s.content.inspection_form_comments,"onUpdate:content":o=>s.content.inspection_form_comments=o,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"])):i("",!0),t(B,{onClick:o=>p.saveField(s),class:"mt-2",disabled:s.loading},{default:e(()=>[c("Guardar ")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["loading"]))),128))])):i("",!0),u.sub_sections?(a(),r("div",Y,[t(b,{multiple:""},{default:e(()=>[(a(!0),r(w,null,k(u.sub_sections,(s,C)=>(a(),m(L,{key:C,class:"my-5"},{default:e(()=>[t(U,{class:"text-h6"},{default:e(()=>[c(_(s.ct_inspection_section)+" ",1),t(v,{class:"ml-2 mt-0 pt-0"},{default:e(()=>[c(" Sub-sección ")]),_:1})]),_:2},1024),t(D,null,{default:e(()=>[s.fields?(a(),r("div",Z,[(a(!0),r(w,null,k(s.fields,(o,O)=>(a(),m(V,{key:O,class:"my-5",loading:o.loading},{default:e(()=>[c(_(p.complementData(o))+" ",1),t(q,{class:"d-flex justify-between"},{default:e(()=>[c(_(o.ct_inspection_form)+" ",1),o.content.inspection_form_value?(a(),m(y,{key:0,color:"success"},{default:e(()=>[c("mdi-check")]),_:1})):i("",!0),p.isEmptyField(o)&&o.required?(a(),m(y,{key:1,color:"red"},{default:e(()=>[c("mdi-alert-circle-outline")]),_:1})):i("",!0)]),_:2},1024),t(v,{class:"d-flex align-center justify-between"},{default:e(()=>[c(" Campo "+_(o.required?"*Requerido":"Opcional")+" ",1),t(E,{modelValue:o.switch_comment,"onUpdate:modelValue":h=>o.switch_comment=h,color:"secondary",label:"Comentario","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(F,null,{default:e(()=>[t(x,{content:o.content.inspection_form_value,"onUpdate:content":h=>o.content.inspection_form_value=h,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"]),o.switch_comment?(a(),r("p",$,"Comentarios:")):i("",!0),o.switch_comment?(a(),m(x,{key:1,content:o.content.inspection_form_comments,"onUpdate:content":h=>o.content.inspection_form_comments=h,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"])):i("",!0),t(B,{onClick:h=>p.saveField(o),class:"mt-2",disabled:o.loading},{default:e(()=>[c("Guardar")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["loading"]))),128))])):i("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])):i("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])])])}const ae=A(J,[["render",S],["__scopeId","data-v-40d43c31"]]);export{ae as default};

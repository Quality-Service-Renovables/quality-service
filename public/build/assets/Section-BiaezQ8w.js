import{Q as R}from"./vue-quill.esm-bundler-D3VVU0A6.js";import{_ as H}from"./PrimaryButton-B3XcTgJg.js";import{L as I,H as T,q as b,r as l,o,e as r,a as z,b as t,w as e,F as x,y as w,c as _,d as a,t as m,g as i}from"./app-DHtr17ZB.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={components:{QuillEditor:R,PrimaryButton:H,Toaster:I},props:{dialogForm:{type:Boolean,required:!0},ct_inspection_uuid:{type:String,required:!0},inspection_uuid:{type:String,required:!0}},data(){return{dialogFormLoading:!1,sectionsForm:[],expandedPanel:[0,1,2,3,4,5,6]}},methods:{getForm(){this.dialogFormLoading=!0,T.get("api/inspection/forms/get-form-inspection/"+this.inspection_uuid).then(c=>{this.dialogFormLoading=!1,this.sectionsForm=c.data.data.sections}).catch(c=>{this.dialogFormLoading=!1,this.handleErrors(c)})},closeSectionDialog(){this.$emit("closeSectionDialog")},saveField(c){let u={inspection_uuid:this.inspection_uuid,form:[{inspection_form_value:c.content.inspection_form_value,inspection_form_comments:c.content.inspection_form_comments,ct_inspection_form_uuid:c.ct_inspection_form_uuid}]};if(console.log("formData: "),console.log(u),u.form[0].inspection_form_value==null||u.form[0].inspection_form_value==""){b.error("El campo no puede estar vacío");return}else T.post("api/inspection/forms/set-form-inspection",u).then(k=>{b.success("Campo guardado correctamente"),this.getForm()}).catch(k=>{this.handleErrors(k)})},complementData(c){c.content==null?c.content={inspection_form_value:"",inspection_form_comments:""}:c.switch_comment=c.content.inspection_form_value!==""&&c.content.inspection_form_comments!==null&&c.content.inspection_form_comments!=="<p><br></p>"},isEmptyField(c){return c.content.inspection_form_value==null||c.content.inspection_form_value==""}},mounted(){this.getForm()}},K={class:"max-w-7xl mx-auto sm:px-4 lg:px-6 mb-5 pb-5"},M={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={key:0},X={key:0,class:"mt-3 text-grey"},Y={key:1},Z={key:0},$={key:0,class:"mt-3 text-grey"};function S(c,u,k,ee,h,d){const v=l("v-card-subtitle"),U=l("v-expansion-panel-title"),y=l("v-icon"),q=l("v-card-title"),E=l("v-switch"),g=l("QuillEditor"),B=l("PrimaryButton"),F=l("v-card-text"),V=l("v-card"),D=l("v-expansion-panel-text"),L=l("v-expansion-panel"),P=l("v-expansion-panels"),j=l("v-col"),N=l("v-row"),Q=l("v-container");return o(),r("div",K,[z("div",M,[t(V,{loading:h.dialogFormLoading},{default:e(()=>[t(F,{class:"padding-0"},{default:e(()=>[t(Q,null,{default:e(()=>[t(N,null,{default:e(()=>[t(j,{cols:"12",class:"padding-0"},{default:e(()=>[t(P,{multiple:"",modelValue:h.expandedPanel,"onUpdate:modelValue":u[0]||(u[0]=p=>h.expandedPanel=p)},{default:e(()=>[(o(!0),r(x,null,w(h.sectionsForm,(p,G)=>(o(),_(L,{key:G,class:"my-5",expanded:!0},{default:e(()=>[t(U,{class:"text-h6"},{default:e(()=>[a(m(p.section_details.ct_inspection_section)+" ",1),t(v,{class:"ml-2 mt-0 pt-0"},{default:e(()=>[a(" Sección ")]),_:1})]),_:2},1024),t(D,null,{default:e(()=>[p.fields?(o(),r("div",W,[(o(!0),r(x,null,w(p.fields,(s,C)=>(o(),_(V,{key:C,class:"my-5"},{default:e(()=>[a(m(d.complementData(s))+" ",1),t(q,{class:"d-flex justify-between"},{default:e(()=>[a(m(s.ct_inspection_form)+" ",1),s.content.inspection_form_value?(o(),_(y,{key:0,color:"success"},{default:e(()=>[a("mdi-check")]),_:1})):i("",!0),d.isEmptyField(s)&&s.required?(o(),_(y,{key:1,color:"red"},{default:e(()=>[a("mdi-alert-circle-outline")]),_:1})):i("",!0)]),_:2},1024),t(v,{class:"d-flex align-center justify-between"},{default:e(()=>[a(" Campo "+m(s.required?"*Requerido":"Opcional")+" ",1),t(E,{modelValue:s.switch_comment,"onUpdate:modelValue":n=>s.switch_comment=n,color:"secondary",label:"Comentario","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(F,{class:"pt-0"},{default:e(()=>[t(g,{content:s.content.inspection_form_value,"onUpdate:content":n=>s.content.inspection_form_value=n,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"]),s.switch_comment?(o(),r("p",X,"Comentarios:")):i("",!0),s.switch_comment?(o(),_(g,{key:1,content:s.content.inspection_form_comments,"onUpdate:content":n=>s.content.inspection_form_comments=n,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"])):i("",!0),t(B,{onClick:n=>d.saveField(s),class:"mt-2"},{default:e(()=>[a("Guardar ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):i("",!0),p.sub_sections?(o(),r("div",Y,[t(P,{multiple:""},{default:e(()=>[(o(!0),r(x,null,w(p.sub_sections,(s,C)=>(o(),_(L,{key:C,class:"my-5"},{default:e(()=>[t(U,{class:"text-h6"},{default:e(()=>[a(m(s.ct_inspection_section)+" ",1),t(v,{class:"ml-2 mt-0 pt-0"},{default:e(()=>[a(" Sub-sección ")]),_:1})]),_:2},1024),t(D,null,{default:e(()=>[s.fields?(o(),r("div",Z,[(o(!0),r(x,null,w(s.fields,(n,O)=>(o(),_(V,{key:O,class:"my-5"},{default:e(()=>[a(m(d.complementData(n))+" ",1),t(q,{class:"d-flex justify-between"},{default:e(()=>[a(m(n.ct_inspection_form)+" ",1),n.content.inspection_form_value?(o(),_(y,{key:0,color:"success"},{default:e(()=>[a("mdi-check")]),_:1})):i("",!0),d.isEmptyField(n)&&n.required?(o(),_(y,{key:1,color:"red"},{default:e(()=>[a("mdi-alert-circle-outline")]),_:1})):i("",!0)]),_:2},1024),t(v,{class:"d-flex align-center justify-between"},{default:e(()=>[a(" Campo "+m(n.required?"*Requerido":"Opcional")+" ",1),t(E,{modelValue:n.switch_comment,"onUpdate:modelValue":f=>n.switch_comment=f,color:"secondary",label:"Comentario","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(F,null,{default:e(()=>[t(g,{content:n.content.inspection_form_value,"onUpdate:content":f=>n.content.inspection_form_value=f,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"]),n.switch_comment?(o(),r("p",$,"Comentarios:")):i("",!0),n.switch_comment?(o(),_(g,{key:1,content:n.content.inspection_form_comments,"onUpdate:content":f=>n.content.inspection_form_comments=f,theme:"snow",toolbar:"essential",heigth:"100%",contentType:"html"},null,8,["content","onUpdate:content"])):i("",!0),t(B,{onClick:f=>d.saveField(n),class:"mt-2"},{default:e(()=>[a("Guardar")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):i("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])):i("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])])])}const ce=A(J,[["render",S],["__scopeId","data-v-cec2f9d2"]]);export{ce as default};

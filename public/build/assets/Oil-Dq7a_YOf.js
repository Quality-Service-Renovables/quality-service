import{r as i,o as O,e as A,b as e,u as V,w as a,F as $,L as b,l as m,Z as F,a as u,d as r,m as M,t as j}from"./app-COK-H-c1.js";import{_ as N}from"./AuthenticatedLayout-BLHpBXVc.js";import"./sweetalert2.all-C2A1vHOZ.js";import"./ApplicationLogo-D1is4lkj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B=u("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Aceites",-1),P={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-4 lg:px-6"},R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},L={class:"text-h5"},S={components:{Toaster:b},props:{oils:{type:Array,required:!0}},data:()=>({search:"",dialog:!1,dialogDelete:!1,headers:[{title:"Aceite",key:"oil"},{title:"Viscosidad",key:"viscosity"},{title:"Descripción",key:"description"},{title:"Cantidad",key:"quantity"},{title:"Categoria",key:"category.ct_oil"},{title:"Marca",key:"trademark.trademark"},{title:"Modelo",key:"trademark.model.trademark_model"},{title:"Fecha producción",key:"production_date"},{title:"Fecha expiración",key:"expiration_date"},{title:"Estatus",key:"active"},{title:"Acciones",key:"actions",sortable:!1}],editedIndex:-1,editedItem:{oil_uuid:"",oil:"",viscosity:"",description:"",production_date:"",expiration_date:"",quantity:"",active:!1,ct_oil_code:"",trademark_code:"",trademark_model_code:""},defaultItem:{oil_uuid:"",oil:"",viscosity:"",description:"",production_date:"",expiration_date:"",quantity:"",active:!1,ct_oil_code:"",trademark_code:"",trademark_model_code:""},ct_oils:[],trademarks:[],trademark_models:[]}),computed:{formTitle(){return this.editedIndex===-1?"Nuevo aceite":"Editar aceite"}},watch:{dialog(d){d||this.close()},dialogDelete(d){d||this.closeDelete()}},methods:{editItem(d){this.editedIndex=this.oils.indexOf(d),d.active=d.active=="1",d.ct_oil_code=d.category.ct_oil_code,d.trademark_code=d.trademark.trademark_code,d.trademark_model_code=d.trademark.model.trademark_model_code,this.editedItem=Object.assign({},d),this.dialog=!0},deleteItem(d){this.editedIndex=this.oils.indexOf(d),this.editedItem=Object.assign({},d),this.dialogDelete=!0},deleteItemConfirm(d){this.oils.splice(this.editedIndex,1);const t=()=>axios.delete("api/oils/"+d);m.promise(t,{loading:"Procesando...",success:o=>(this.closeDelete(),"Aceite eliminado correctamente"),error:o=>{this.handleErrors(o)}})},close(){this.dialog=!1,this.$nextTick(()=>{console.log("Cambiando estatus en close"),this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{console.log("Cambiando estatus en closeDelete"),this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){let d={oil:this.editedItem.oil,viscosity:this.editedItem.viscosity,description:this.editedItem.description,ct_oil_code:this.editedItem.ct_oil_code,trademark_code:this.editedItem.trademark_code,trademark_model_code:this.editedItem.trademark_model_code,production_date:this.editedItem.production_date,expiration_date:this.editedItem.expiration_date,quantity:this.editedItem.quantity,active:this.editedItem.active};if(this.editedIndex>-1){const t=()=>axios.put("api/oils/"+this.editedItem.oil_uuid,d);m.promise(t(),{loading:"Procesando...",success:o=>(this.$inertia.reload(),this.close(),"Aceite actualizado correctamente"),error:o=>{this.handleErrors(o)}})}else{const t=()=>axios.post("api/oils",d);m.promise(t(),{loading:"Procesando...",success:o=>(this.$inertia.reload(),this.close(),"Aceite creado correctamente"),error:o=>{this.handleErrors(o)}})}},getColor(d){return d?"green":"red"},getOilCategories(){axios.get("api/oil/categories").then(d=>{this.ct_oils=d.data.data}).catch(d=>{m.error("Error al obtener las categorias de aceites")})},getTrademarks(){axios.get("api/trademarks").then(d=>{this.trademarks=d.data.data}).catch(d=>{m.error("Error al obtener las marcas")})},getTrademarkModels(){axios.get("api/trademark/models").then(d=>{this.trademark_models=d.data.data}).catch(d=>{m.error("Error al obtener los modelos de la marca")})}},mounted(){this.getOilCategories(),this.getTrademarks(),this.getTrademarkModels()}},Q=Object.assign(S,{__name:"Oil",setup(d){return(t,o)=>{const p=i("v-icon"),n=i("v-text-field"),y=i("v-toolbar-title"),C=i("v-divider"),_=i("v-spacer"),c=i("v-btn"),k=i("v-card-title"),s=i("v-col"),x=i("v-textarea"),v=i("v-select"),D=i("v-switch"),f=i("v-row"),w=i("v-container"),U=i("v-card-text"),g=i("v-card-actions"),h=i("v-card"),I=i("v-dialog"),q=i("v-toolbar"),E=i("v-data-table");return O(),A($,null,[e(V(b),{position:"top-right",richColors:"",visibleToasts:10}),e(V(F),{title:"Equipments"}),e(N,null,{header:a(()=>[B]),default:a(()=>[u("div",P,[u("div",z,[u("div",R,[e(h,null,{default:a(()=>[e(f,null,{default:a(()=>[e(s,{cols:"12",sm:"12"},{default:a(()=>[e(E,{headers:t.headers,items:d.oils,"fixed-header":"",search:t.search},{"item.active":a(({value:l})=>[e(p,{color:t.getColor(l)},{default:a(()=>[r("mdi-circle-slice-8")]),_:2},1032,["color"])]),top:a(()=>[e(q,{flat:""},{default:a(()=>[e(y,{class:"ml-1"},{default:a(()=>[e(n,{modelValue:t.search,"onUpdate:modelValue":o[0]||(o[0]=l=>t.search=l),label:"Buscar","hide-details":"",variant:"solo","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])]),_:1}),e(C,{class:"mx-4",inset:"",vertical:""}),e(_),e(I,{modelValue:t.dialog,"onUpdate:modelValue":o[11]||(o[11]=l=>t.dialog=l),"max-width":"500px"},{activator:a(({props:l})=>[e(c,M({class:"mb-2",color:"primary",dark:""},l,{icon:"mdi-plus"}),null,16)]),default:a(()=>[e(h,null,{default:a(()=>[e(k,null,{default:a(()=>[u("span",L,j(t.formTitle),1)]),_:1}),e(U,null,{default:a(()=>[e(w,null,{default:a(()=>[e(f,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(n,{modelValue:t.editedItem.oil,"onUpdate:modelValue":o[1]||(o[1]=l=>t.editedItem.oil=l),label:"Nombre",variant:"solo","hide-details":""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(n,{modelValue:t.editedItem.viscosity,"onUpdate:modelValue":o[2]||(o[2]=l=>t.editedItem.viscosity=l),label:"Viscosidad",variant:"solo","hide-details":""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(x,{modelValue:t.editedItem.description,"onUpdate:modelValue":o[3]||(o[3]=l=>t.editedItem.description=l),label:"Descripción",variant:"solo","hide-details":""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(n,{modelValue:t.editedItem.quantity,"onUpdate:modelValue":o[4]||(o[4]=l=>t.editedItem.quantity=l),label:"Cantidad",variant:"solo","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(v,{modelValue:t.editedItem.ct_oil_code,"onUpdate:modelValue":o[5]||(o[5]=l=>t.editedItem.ct_oil_code=l),items:t.ct_oils,label:"Categoria","item-title":"ct_oil","item-value":"ct_oil_code","hide-details":"",variant:"solo"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(v,{modelValue:t.editedItem.trademark_code,"onUpdate:modelValue":o[6]||(o[6]=l=>t.editedItem.trademark_code=l),items:t.trademarks,label:"Marca","item-title":"trademark","item-value":"trademark_code","hide-details":"",variant:"solo"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(v,{modelValue:t.editedItem.trademark_model_code,"onUpdate:modelValue":o[7]||(o[7]=l=>t.editedItem.trademark_model_code=l),items:t.trademark_models,label:"Modelo","item-title":"trademark_model","item-value":"trademark_model_code","hide-details":"",variant:"solo"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(n,{modelValue:t.editedItem.production_date,"onUpdate:modelValue":o[8]||(o[8]=l=>t.editedItem.production_date=l),label:"Fecha producción",variant:"solo","hide-details":"",type:"date"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(n,{modelValue:t.editedItem.expiration_date,"onUpdate:modelValue":o[9]||(o[9]=l=>t.editedItem.expiration_date=l),label:"Fecha expiración",variant:"solo","hide-details":"",type:"date"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(D,{label:"Activo",modelValue:t.editedItem.active,"onUpdate:modelValue":o[10]||(o[10]=l=>t.editedItem.active=l),color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_),e(c,{color:"blue-darken-1",variant:"text",onClick:t.close},{default:a(()=>[r(" Cancelar ")]),_:1},8,["onClick"]),e(c,{color:"blue-darken-1",variant:"text",onClick:t.save},{default:a(()=>[r(" Guardar ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(I,{modelValue:t.dialogDelete,"onUpdate:modelValue":o[13]||(o[13]=l=>t.dialogDelete=l),"max-width":"500px"},{default:a(()=>[e(h,null,{default:a(()=>[e(k,{class:"text-h5 text-center"},{default:a(()=>[r("¿Estás seguro de eliminar?")]),_:1}),e(g,null,{default:a(()=>[e(_),e(c,{color:"blue-darken-1",variant:"text",onClick:t.closeDelete},{default:a(()=>[r("Cancel")]),_:1},8,["onClick"]),e(c,{color:"blue-darken-1",variant:"text",onClick:o[12]||(o[12]=l=>t.deleteItemConfirm(t.editedItem.oil_uuid))},{default:a(()=>[r("Si, eliminar")]),_:1}),e(_)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":a(({item:l})=>[e(p,{class:"me-2",size:"small",onClick:T=>t.editItem(l)},{default:a(()=>[r(" mdi-pencil ")]),_:2},1032,["onClick"]),e(p,{size:"small",onClick:T=>t.deleteItem(l)},{default:a(()=>[r(" mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items","search"])]),_:1})]),_:1})]),_:1})])])])]),_:1})],64)}}});export{Q as default};

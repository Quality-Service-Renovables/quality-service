import{r as s,o as c,e as q,b as e,u as p,w as t,F as P,L as f,q as T,Z as B,a as d,d as i,c as v,g as h}from"./app-K-shZ7NT.js";import{_ as N}from"./AuthenticatedLayout-De2P2DPL.js";import"./sweetalert2.all-CDV-19Y8.js";import"./ApplicationLogo-CZ_VtXkg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E=d("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Proyectos de inspección",-1),$={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-4 lg:px-6"},O={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={components:{Toaster:f},props:{projects:{type:Array,required:!0}},data:()=>({search:"",dialogDelete:!1,headers:[{title:"Resumen",key:"resume"},{title:"Conclusión",key:"conclusion"},{title:"Recomendaciones",key:"recomendations"},{title:"Actions",key:"actions",sortable:!1}]}),computed:{formTitle(){return this.editedIndex===-1?"Nueva categoria":"Editar categoria"}},watch:{dialogDelete(n){n||this.closeDelete()}},methods:{deleteItem(n){this.editedIndex=this.ct_equipments.indexOf(n),this.editedItem=Object.assign({},n),this.dialogDelete=!0},deleteItemConfirm(n){this.ct_equipments.splice(this.editedIndex,1);const o=()=>axios.delete("api/equipment/categories/"+n);T.promise(o,{loading:"Procesando...",success:a=>(this.closeDelete(),"Categoria eliminada correctamente"),error:a=>{this.handleErrors(a)}})},closeDelete(){this.dialogDelete=!1}}},Z=Object.assign(R,{__name:"Projects",setup(n){return(o,a)=>{const g=s("v-text-field"),b=s("v-toolbar-title"),k=s("v-divider"),r=s("v-spacer"),C=s("v-card-title"),m=s("v-btn"),x=s("v-card-actions"),_=s("v-card"),y=s("v-dialog"),w=s("v-toolbar"),u=s("v-icon"),D=s("v-data-table"),I=s("v-col"),V=s("v-row");return c(),q(P,null,[e(p(f),{position:"top-right",richColors:"",visibleToasts:10}),e(p(B),{title:"Proyectos de inspección"}),e(N,null,{header:t(()=>[E]),default:t(()=>[d("div",$,[d("div",F,[d("div",O,[e(_,null,{default:t(()=>[e(V,null,{default:t(()=>[e(I,{cols:"12",sm:"12"},{default:t(()=>[e(D,{headers:o.headers,items:n.projects.inspections,"fixed-header":"",search:o.search},{top:t(()=>[e(w,{flat:""},{default:t(()=>[e(b,{class:"ml-1"},{default:t(()=>[e(g,{modelValue:o.search,"onUpdate:modelValue":a[0]||(a[0]=l=>o.search=l),label:"Buscar","hide-details":"",variant:"solo","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])]),_:1}),e(k,{class:"mx-4",inset:"",vertical:""}),e(r),e(y,{modelValue:o.dialogDelete,"onUpdate:modelValue":a[2]||(a[2]=l=>o.dialogDelete=l),"max-width":"500px"},{default:t(()=>[e(_,null,{default:t(()=>[e(C,{class:"text-h5 text-center"},{default:t(()=>[i("¿Estás seguro de eliminar?")]),_:1}),e(x,null,{default:t(()=>[e(r),e(m,{color:"blue-darken-1",variant:"text",onClick:o.closeDelete},{default:t(()=>[i("Cancel")]),_:1},8,["onClick"]),e(m,{color:"blue-darken-1",variant:"text",onClick:a[1]||(a[1]=l=>o.deleteItemConfirm(o.editedItem.inspection_uuid))},{default:t(()=>[i("Si, eliminar")]),_:1}),e(r)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":t(({item:l})=>[o.hasPermissionTo("projects.update")?(c(),v(u,{key:0,class:"me-2",size:"small",onClick:j=>o.editItem(l)},{default:t(()=>[i(" mdi-pencil ")]),_:2},1032,["onClick"])):h("",!0),o.hasPermissionTo("projects.delete")?(c(),v(u,{key:1,size:"small",onClick:j=>o.deleteItem(l)},{default:t(()=>[i(" mdi-delete ")]),_:2},1032,["onClick"])):h("",!0)]),_:1},8,["headers","items","search"])]),_:1})]),_:1})]),_:1})])])])]),_:1})],64)}}});export{Z as default};

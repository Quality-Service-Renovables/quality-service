import{r as d,o as u,e as N,b as t,u as V,w as a,F as U,L as y,q as _,Z as j,a as n,d as l,c as v,s as q,x as B,t as z,g as p}from"./app-BCIH86nq.js";import{_ as A}from"./AuthenticatedLayout-CPlqeFs4.js";import"./sweetalert2.all-DJY_VrzD.js";import"./ApplicationLogo-CPrSFOSt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F=n("h2",{class:"font-semibold text-xl leading-tight"},"Marcas",-1),R={class:"py-12"},S={class:"max-w-7xl mx-auto sm:px-4 lg:px-6"},L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},G={class:"text-h5"},Z={components:{Toaster:y},props:{trademarks:{type:Array,required:!0}},data:()=>({search:"",dialog:!1,dialogDelete:!1,headers:[{title:"Marca",key:"trademark"},{title:"Estado",key:"active"},{title:"Categoría",key:"category.ct_trademark"},{title:"Acciones",key:"actions",sortable:!1}],editedIndex:-1,editedItem:{trademark_uuid:"",trademark:"",active:!1,ct_trademark_code:""},defaultItem:{trademark_uuid:"",trademark:"",active:!1,ct_trademark_code:""},ct_trademarks:[]}),computed:{formTitle(){return this.editedIndex===-1?"Nueva marca":"Editar marca"}},watch:{dialog(o){o||this.close()},dialogDelete(o){o||this.closeDelete()}},methods:{editItem(o){this.editedIndex=this.trademarks.indexOf(o),o.active=o.active=="1",o.ct_trademark_code=o.category.ct_trademark_code,this.editedItem=Object.assign({},o),this.dialog=!0},deleteItem(o){this.editedIndex=this.trademarks.indexOf(o),this.editedItem=Object.assign({},o),this.dialogDelete=!0},deleteItemConfirm(o){const e=()=>axios.delete("api/trademarks/"+o);_.promise(e,{loading:"Procesando...",success:s=>(this.closeDelete(),this.$inertia.reload(),"Marca eliminada correctamente"),error:s=>{this.handleErrors(s)}})},close(){this.dialog=!1,this.$nextTick(()=>{console.log("Cambiando estatus en close"),this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{console.log("Cambiando estatus en closeDelete"),this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1){const o=()=>axios.put("api/trademarks/"+this.editedItem.trademark_uuid,{trademark:this.editedItem.trademark,active:this.editedItem.active,ct_trademark_code:this.editedItem.ct_trademark_code});_.promise(o(),{loading:"Procesando...",success:e=>(this.close(),this.$inertia.reload(),"Marca actualizada correctamente"),error:e=>{this.handleErrors(e)}})}else{const o=()=>axios.post("api/trademarks",{trademark:this.editedItem.trademark,active:this.editedItem.active,ct_trademark_code:this.editedItem.ct_trademark_code});_.promise(o(),{loading:"Procesando...",success:e=>(this.close(),this.$inertia.reload(),"Marca creada correctamente"),error:e=>{this.handleErrors(e)}})}},getColor(o){return o?"green":"red"},getTrademarkCategories(){axios.get("api/trademark/categories").then(o=>{this.ct_trademarks=o.data.data}).catch(o=>{_.error("Error al cargar las categorías de marcas")})}},mounted(){this.getTrademarkCategories()}},X=Object.assign(Z,{__name:"Trademark",setup(o){return(e,s)=>{const k=d("v-icon"),f=d("v-text-field"),x=d("v-toolbar-title"),T=d("v-divider"),c=d("v-spacer"),i=d("v-btn"),g=d("v-card-title"),m=d("v-col"),w=d("v-select"),D=d("v-switch"),I=d("v-row"),P=d("v-container"),$=d("v-card-text"),b=d("v-card-actions"),h=d("v-card"),C=d("v-dialog"),E=d("v-toolbar"),O=d("v-data-table");return u(),N(U,null,[t(V(y),{position:"top-right",richColors:"",visibleToasts:10}),t(V(j),{title:"Marcas"}),t(A,null,{header:a(()=>[F]),default:a(()=>[n("div",R,[n("div",S,[n("div",L,[t(h,null,{default:a(()=>[t(I,null,{default:a(()=>[t(m,{cols:"12",sm:"12"},{default:a(()=>[t(O,{headers:e.headers,items:o.trademarks,"fixed-header":"",search:e.search},{"item.active":a(({value:r})=>[t(k,{color:e.getColor(r)},{default:a(()=>[l("mdi-circle-slice-8")]),_:2},1032,["color"])]),top:a(()=>[t(E,{flat:""},{default:a(()=>[t(x,{class:"ml-1"},{default:a(()=>[t(f,{modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=r=>e.search=r),label:"Buscar","hide-details":"",variant:"solo","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])]),_:1}),t(T,{class:"mx-4",inset:"",vertical:""}),t(c),e.hasPermissionTo("trademarks.create")||e.hasPermissionTo("trademarks.update")?(u(),v(C,{key:0,modelValue:e.dialog,"onUpdate:modelValue":s[4]||(s[4]=r=>e.dialog=r),"max-width":"500px"},q({default:a(()=>[t(h,null,{default:a(()=>[t(g,null,{default:a(()=>[n("span",G,z(e.formTitle),1)]),_:1}),t($,null,{default:a(()=>[t(P,null,{default:a(()=>[t(I,null,{default:a(()=>[t(m,{cols:"12"},{default:a(()=>[t(f,{modelValue:e.editedItem.trademark,"onUpdate:modelValue":s[1]||(s[1]=r=>e.editedItem.trademark=r),label:"Nombre",variant:"solo","hide-details":""},null,8,["modelValue"])]),_:1}),t(m,{cols:"12"},{default:a(()=>[t(w,{modelValue:e.editedItem.ct_trademark_code,"onUpdate:modelValue":s[2]||(s[2]=r=>e.editedItem.ct_trademark_code=r),items:e.ct_trademarks,"item-title":"ct_trademark","item-value":"ct_trademark_code",label:"Categoría",variant:"solo","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(m,{cols:"12"},{default:a(()=>[t(D,{label:"Activo",modelValue:e.editedItem.active,"onUpdate:modelValue":s[3]||(s[3]=r=>e.editedItem.active=r),color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(c),t(i,{color:"blue-darken-1",variant:"text",onClick:e.close},{default:a(()=>[l(" Cancelar ")]),_:1},8,["onClick"]),t(i,{color:"blue-darken-1",variant:"text",onClick:e.save},{default:a(()=>[l(" Guardar ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:2},[e.hasPermissionTo("trademarks.create")?{name:"activator",fn:a(({props:r})=>[t(i,B({class:"mb-2",color:"primary",dark:""},r,{icon:"mdi-plus"}),null,16)]),key:"0"}:void 0]),1032,["modelValue"])):p("",!0),t(C,{modelValue:e.dialogDelete,"onUpdate:modelValue":s[6]||(s[6]=r=>e.dialogDelete=r),"max-width":"500px"},{default:a(()=>[t(h,null,{default:a(()=>[t(g,{class:"text-h5 text-center"},{default:a(()=>[l("¿Estás seguro de eliminar?")]),_:1}),t(b,null,{default:a(()=>[t(c),t(i,{color:"blue-darken-1",variant:"text",onClick:e.closeDelete},{default:a(()=>[l("Cancel")]),_:1},8,["onClick"]),t(i,{color:"blue-darken-1",variant:"text",onClick:s[5]||(s[5]=r=>e.deleteItemConfirm(e.editedItem.trademark_uuid))},{default:a(()=>[l("Si, eliminar")]),_:1}),t(c)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":a(({item:r})=>[e.hasPermissionTo("trademarks.update")?(u(),v(k,{key:0,class:"me-2",size:"small",onClick:M=>e.editItem(r)},{default:a(()=>[l(" mdi-pencil ")]),_:2},1032,["onClick"])):p("",!0),e.hasPermissionTo("trademarks.delete")?(u(),v(k,{key:1,size:"small",onClick:M=>e.deleteItem(r)},{default:a(()=>[l(" mdi-delete ")]),_:2},1032,["onClick"])):p("",!0)]),_:1},8,["headers","items","search"])]),_:1})]),_:1})]),_:1})])])])]),_:1})],64)}}});export{X as default};
